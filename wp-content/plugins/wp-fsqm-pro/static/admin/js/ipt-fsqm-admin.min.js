/*!
* eForm - WordPress Form Builder
*
* Autogenerated by Grunt on: 2017-09-22
* @version 3.8.0
* @author Swashata Ghosh (WPQuark)
* @license GPL-3.0
*/
jQuery(document).ready(function(e){"use strict";var t,i=e("#ipt_fsqm_save"),a=e("#ipt_fsqm_preview"),r=e("#ipt_fsqm_ajax_loader"),o=r.data("save"),n=(r.data("preview"),r.data("success")),f=r.find(".ipt_uif_ajax_loader_text"),s=r.find(".ipt_uif_ajax_loader_inner"),d=e("#ipt_fsqm_auto_save"),_=!1,m=!1,l=!1;t=function(t){if(!m){m=!0,_||(f.html(o),s.addClass("ipt_uif_ajax_loader_animate"),r.show());var i=e(".ipt_uif > form").eq(0).serialize(),a=0,d={action:e(".ipt_uif > form").eq(0).find('[name="action"]').val(),ipt_ps_post:i,ipt_ps_send_as_str:!0,ipt_ps_look_into:"ipt_ps_post"};e.post(ajaxurl,d,function(t){if(s.removeClass("ipt_uif_ajax_loader_animate"),"cheating"==t)f.html("Cheating");else if(e.isNumeric(t)){var i=e("#ipt_fsqm_form #form_id");i.length?i.val(Number(t)):(e('<input type="hidden" name="form_id" id="form_id" value="'+t+'" />').prependTo(e("#ipt_fsqm_form")),window.history.pushState({},"","admin.php?page=ipt_fsqm_all_forms&action=edit&form_id="+Number(t))),a=t,f.html(n)}else f.html("Server Error");l=!1}).fail(function(){s.removeClass("ipt_uif_ajax_loader_animate"),f.html("HTTP Error")}).always(function(){r.delay(1e3).fadeOut("fast",function(){"function"==typeof t&&t(a),m=!1})})}};i.length&&(i.attr("disabled",!1),e(document).on("click","#ipt_fsqm_settings_save, #ipt_fsqm_add_layout, .ipt_uif_builder_layout_settings, .ipt_uif_builder_layout_del",function(){l=!0}),e(document).on("dragstop",".ipt_uif_droppable_element, .ipt_uif_builder_layout_tabs",function(){l=!0}),e(document).on("sortstop",".ipt_uif_builder_drop_here, .ipt_uif_builder_layout_tab",function(){l=!0}),e(document).on("change","input, select, textarea",function(){l=!0}),e(document).on("slidestop",function(){l=!0}),setInterval(function(){_||m||!l||(_=!0,i.attr("disabled",!0),a.attr("disabled",!0),d.show(),t(function(){_=!1,i.attr("disabled",!1),a.attr("disabled",!1),d.fadeOut("fast")}))},2e4),e(window).on("beforeunload",function(){return l?"You have unsaved changes. Leaving this page will discard the changes":void 0}),i.on("click",function(e){e.preventDefault(),t()}),e(document).on("keydown",function(e){e.ctrlKey&&(83==e.keyCode&&(e.preventDefault(),i.trigger("click")),80==e.keyCode&&(e.preventDefault(),a.trigger("click")))})),a.length&&(a.attr("disabled",!1),a.on("click",function(i){i.preventDefault(),t(function(t){var i=e(window).width(),a=e(window).height(),r=1600<i?1600:i,o=0;e("body.admin-bar").length&&(o=28);var n=ajaxurl+"?action=ipt_fsqm_preview_form&form_id="+t;e('<div><iframe src="'+n+'" style="width: 100%; height: 97%; border: 0 none;"></iframe>').dialog({autoOpen:!0,modal:!0,width:r-80,height:a-85-o,title:"WP Feedback, Survey & Quiz Manager Pro - Preview",closeOnEscape:!0,create:function(t,i){e("body").addClass("ipt_uif_common ipt_uif")},close:function(t,i){e("body").removeClass("ipt_uif_common ipt_uif")}})})}));var p=function(){"page_specific"==e("#settings_timer_time_limit_type").val()?e("#ipt_fsqm_form").addClass("ipt-fsqm-ps-timer"):e("#ipt_fsqm_form").removeClass("ipt-fsqm-ps-timer")};p(),e("#settings_timer_time_limit_type").on("change",p);if(function(){if(e("#ipt_fsqm_fb_p_al").length&&(e("#ipt_fsqm_fb_p_al").hide(),e(".ipt_fsqm_fb_hidden_init").removeClass("ipt_fsqm_fb_hidden_init")),e(".ipt_uif_builder_empty").length){try{console.warn("Added an empty container, since none was found. eForm")}catch(e){}e("#ipt_fsqm_add_layout").trigger("click")}}(),e("#ipt-eform-new-form-wizard").length){var u=function(t){var i=t.find("> a"),a=t.data("formCatKey"),r=t.data("formKey");if(e("#eform_form_cat").val(a),e("#eform_form_key").val(r),e("#eform_name").val(i.text()),!t.data("eFormWizardInitiated")){var o=ajaxurl+"?action=eform_wizard_preview&formcat="+a+"&formkey="+r,n=e(i.attr("href")),f=e('<iframe src="'+o+'"></iframe>');f.on("load",function(){n.find(".eform-new-form-wizard-loader").remove()}),n.append(f),t.data("eFormWizardInitiated",!0)}};e("#ipt-eform-new-form-wizard").fadeIn("normal",function(){e("#ipt-eform-new-form-wizard-loader").hide()}).on("tabsbeforeactivate",function(t,i){if(e(t.target).is("#ipt-eform-new-form-main-tab")){var a=e(i.newPanel).find(".eform-form-template");if(!a.length)return e("#eform_form_cat").val(""),void e("#eform_form_key").val("");var r=a.tabs("option","active"),o=a.find(".eform-form-template-li").eq(r);u(o)}else{var n=e(i.newTab);u(n)}}),e("#ipt-eform-new-form-wizard").on("click",".eform-new-form-wizard-responsive-btns button",function(){var t=e(this),i=t.closest(".eform-new-form-wizard-previewer").removeClass("prv-small").removeClass("prv-medium").removeClass("prv-large");t.siblings("button").removeClass("active"),t.addClass("active"),t.hasClass("eform-nfw-res-small")?i.addClass("prv-small"):t.hasClass("eform-nfw-res-medium")?i.addClass("prv-medium"):i.addClass("prv-large")})}});